<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MenÃ¼ ðŸŒ»</title>

  <link rel="stylesheet" href="60-css/style.css" />

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ff6f91">
  <link rel="apple-touch-icon" href="80-assets/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>

  <main class="menu-container">

    <div class="sunflower">

      <!-- BlÃ¼te -->
      <div class="flower-head">
        <span>ðŸŒ»</span>
      </div>

      <!-- StÃ¤ngel + BlÃ¤tter -->
      <div class="stem">

        <a href="40-dates/index.html"
           class="leaf left">
          ðŸ’• Dates
        </a>

        <a href="50-collection/date-list.html"
           class="leaf right">
          ðŸ’¡ Date Liste
        </a>

      </div>

      <!-- Boden -->
      <div class="ground"></div>

    </div>
    <div class="anim-toggle">
  <label>
    <input type="checkbox" id="animationToggle" checked />
    <span class="slider"></span>
    <span class="label-text">Animation</span>
  </label>
</div>

  </main>
<script>
  const sunflower = document.querySelector(".sunflower");
  const toggle = document.getElementById("animationToggle");

  const animationEnabled =
    localStorage.getItem("menuAnimation") !== "off";

  toggle.checked = animationEnabled;

  function playAnimation() {
    sunflower.classList.remove(
      "grow-stem",
      "grow-leaves",
      "bloom",
      "menu-active"
    );

    setTimeout(() => sunflower.classList.add("grow-stem"), 200);
    setTimeout(() => sunflower.classList.add("grow-leaves"), 1000);
    setTimeout(() => sunflower.classList.add("bloom"), 1800);
    setTimeout(() => sunflower.classList.add("menu-active"), 2300);
  }

  function showInstant() {
    sunflower.classList.add(
      "grow-stem",
      "grow-leaves",
      "bloom",
      "menu-active"
    );
  }

  if (animationEnabled) {
    playAnimation();
  } else {
    showInstant();
  }

  toggle.addEventListener("change", () => {
    if (toggle.checked) {
      localStorage.setItem("menuAnimation", "on");
      playAnimation();
    } else {
      localStorage.setItem("menuAnimation", "off");
      showInstant();
    }
  });
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(() => console.log("Service Worker registriert"));
}
</script>

</body>
</html>
